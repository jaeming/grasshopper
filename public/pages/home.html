<section class="margin-top">
  <div class="mobile-menu hidden-md hidden-lg hidden-sm">
    <a ng-href="#/new_board" class="btn new">
      <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> New Board
    </a>
  </div>
  <div ng-controller="UsersCtrlAjax">
    <div ng-controller="BoardsCtrlAjax">
      <div ng-repeat="board in boards">
        <h2>
          <a href ng-click="expand = !expand">{{board.title}}</a>
        </h2>
        <p>{{board.text}}</p>
        <small>By {{board.user_name}}</small>
        <div class='time'><small>On {{board.created_at}}</small></div>
        <div class="animated">
          <div ng-show="expand">
            <h4 class="message-title">Messages</h4>
            <div ng-repeat="message in board.messages">
              <div class="message-box">
                <p>{{message.body}}</p>
                <small>By {{message.user_name}}</small>
                <div class='time'><small>{{message.created_at}}</small></div>
                <div ng-if="message.user_name === user.name">
                  <button ng-click="deleteMessage(board.url, message.id)" class="btn btn-danger btn-sm">Delete</button>
                </div>
              </div>
            </div>
            <div class="form-container">
              <form role="form" ng-submit="addMessage(board.url)" novalidate="novalidate" id="message-form" autocomplete="off">
                <div class="form-group">
                  <label for="body" class="sr-only">body</label>
                  <textarea rows="4" cols="50" ng-model="$parent.body" class="form-control" placeholder="Leave a new message"></textarea>
                </div>
                <br>
                <input type="submit" name="commit" class="btn-block btn btn-danger" value="Submit">
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
